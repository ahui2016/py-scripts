# tempbk.py 临时备份文件到 Cloudflare R2

- 本软件通过终端输入命令上传文件到 Cloudflare R2 进行临时(短期)备份.
- Cloudflare R2 的优点: 10GB 免费容量, 流量免费.
- 本软件专门针对小文件的临时(短期)备份, 因此 10GB 免费容量够用了.


## 不加密版 与 加密版

本软件有两个版本, 一个加密, 一个不加密, 各有各的好处.
(我比较喜欢加密版)

- 加密版
  - 可以防止云端分析文件
  - 一旦丢失密钥就无法解密
  - 加密后文件体积会增加33%
- 不加密版
  - 不能防止云端分析文件, 有一定法律风险或云端泄密风险 
  - 上传文件后, 可以登入 Cloudflare 网站下载文件

## 安装方法

本软件的安装过程比较复杂, 需要对 Cloudflare R2 及 Python 有基本的理解.
详细安装方法看这里 [github.com/ahui2016/py-scripts](https://github.com/ahui2016/py-scripts)

## 使用方法

加密版的命令是 `tbk`, 不加密版的命令是 `tempbk`, 下面以 `tbk` 为例.

### 上传文件

如果选择加密版, 在上传文件前, 本程序会先自动加密文件, 只上传加密后的文件.

- 使用命令 `tbk upload FILE` 上传文件到云端.
- `tbk -u FILE` 等同于 `tbk upload FILE`

### 自动选择一个最新文件

- 使用命令 `tbk -u FOLDER` (其中 FOLDER 是一个文件夹)
  可以自动选择该文件夹中的一个最新文件 (以最近修改时间为准),
  按回车键确认上传, 输入 n 回车取消.
- 例如 `tbk -u .` 上传当前文件夹内的最新文件.

### 下载文件

如果选择加密版, 在下载文件时, 本程序会自动解密文件.

- 在下载前指定保存文件的文件夹, 例如:  
  `tbk download -dir /path/to/folder`  
  只需要设置一次, 后续下载文件就会自动保存在指定的文件夹
- `tbk -dl PREFIX` 下载文件, 例如: `tbk download 20221111/abc.txt`

### 统计数据

- 使用命令 `tbk count` 可查看各个月份上传了多少个文件.
- 使用命令 `tbk list today` 可列出今天上传的全部文件.
- `tbk list 202211` 列出2022年11月上传的全部文件.
- `tbk -l 20221111` 列出2022年11月11日上传的全部文件.
- `tbk -l` 等同于 `tbk list`

## 总结

大概就是这样, 功能很少很简单, 但如果喜欢命令行的话还蛮好用的.
开源代码: [github.com/ahui2016/py-scripts](https://github.com/ahui2016/py-scripts)
